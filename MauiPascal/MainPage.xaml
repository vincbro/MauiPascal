<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiPascal.MainPage">

    <ScrollView>
        <VerticalStackLayout
            Padding="25,50"
            Spacing="25" VerticalOptions="End">

            <Grid VerticalOptions="Start">
                <VerticalStackLayout>
                    <Entry x:Name="From"
                        Placeholder="From"
                        TextChanged="From_TextChanged"
                        Focused="From_Focused" 
                        Unfocused="From_Unfocused"/>
                </VerticalStackLayout>
                <CollectionView x:Name="FromSuggestions"
                ItemsSource="{Binding FromSuggestions}"
                    IsVisible="False"
                    BackgroundColor="LightGray"
                    VerticalOptions="Start"
                    ZIndex="1"
                    Margin="0,50,0,0">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding .}" Padding="10">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="FromSuggestionTapped" 
                                              CommandParameter="{Binding .}" />
                                </Label.GestureRecognizers>
                            </Label>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>

            <Grid VerticalOptions="Start">
                <VerticalStackLayout>
                    <Entry x:Name="To"
                Placeholder="To"
               TextChanged="To_TextChanged"
               Focused="To_Focused" 
               Unfocused="To_Unfocused"/>
                </VerticalStackLayout>
                <CollectionView x:Name="ToSuggestions"
       ItemsSource="{Binding ToSuggestions}"
           IsVisible="False"
           BackgroundColor="LightGray"
           VerticalOptions="Start"
           ZIndex="1"
           Margin="0,50,0,0">
                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Label Text="{Binding .}" Padding="10">
                                <Label.GestureRecognizers>
                                    <TapGestureRecognizer Tapped="ToSuggestionTapped" 
                                     CommandParameter="{Binding .}" />
                                </Label.GestureRecognizers>
                            </Label>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Grid>

            <Button x:Name="FindRoute" Text="Find route" Clicked="FindRoute_Clicked"/>
        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
